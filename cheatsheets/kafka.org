#+TITLE: Kafka Cheatsheet

*** Create a Kafka topic

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-topics.sh --zookeeper 127.0.0.1:2181 --create --topic "abhishek" --partitions 1 --replication-factor 1

#+END_SRC

*** List the topics

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-topics.sh --zookeeper 127.0.0.1:2181 --list

#+END_SRC

*** Alter the topics

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-topics.sh --zookeeper 127.0.0.1:2181 --topic abhishek --partitions 3

#+END_SRC

*** Describe the topics

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-topics.sh --zookeeper 127.0.0.1:2181 --list abhishek --describe

#+END_SRC

*** Delete the topic

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-topics.sh --zookeeper 127.0.0.1:2181 --delete --topic abhishek

#+END_SRC

*** Alter the topic (retention)

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-configs.sh --zookeeper localhost:2181 --alter --entity-type topics --entity-name abhishek --add-config retention.ms=1000

#+END_SRC

*** List the message from a topic

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic abhishek --from-beginning

#+END_SRC


*** List the consumer groups

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-consumer-groups.sh --zookeeper localhost:2181 --list console-consumer-79697 myconsumer

#+END_SRC

*** Describe the consumer groups

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-consumer-groups.sh --zookeeper localhost:2181 --describe --group abhishek-cg

#+END_SRC

*** Delete the consumer groups

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-consumer-groups.sh --zookeeper localhost:2181 --delete --group abhishek-cg

#+END_SRC

*** generate a set of partition moves to move the topics listed in the file “topics.json” to the brokers with IDs 0 and 1:

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-reassign-partitions.sh --zookeeper localhost:2181 --generate --topics-to-move-json-file topics.json --broker-list 0,1

#+END_SRC

*** execute a proposed partition reassignment from the file “reassign.json”.

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-reassign-partitions.sh --zookeeper localhost:2181 --execute --reassignment-json-file reassign.json

#+END_SRC

*** verify a running partition reassignment from the file “reassign.json”

#+BEGIN_SRC

  cd /home/aaa/code/kafka-docker/kafka

  bin/kafka-reassign-partitions.sh --zookeeper localhost:2181 --verify --reassignment-json-file reassign.json

#+END_SRC
